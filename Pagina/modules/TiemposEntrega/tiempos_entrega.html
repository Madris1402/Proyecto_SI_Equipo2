<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gama Diseño Diseño e Impresión</title>
    <link rel="shortcut icon" href="../../resources/Logo.png" type="image/x-icon">
    <link rel="stylesheet" href="../../resources/estilos.css">
</head>
<body>
    <div>
        <ul>
        <li><a href="#" onclick="openNav()">&#9776;</a></li>
        </ul>
    </div>

    <div id="mySidebar" class="sidebar">
      <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
      <a href="../Consumidores/consumidores.html">Consumidores</a>
      <a href="../Cotizador/cotizador.html">Cotizador</a>
      <a href="../Envios/envios.html">Envios</a>
      <a href="../Historial de Pedidos/historial.html">Historial de Pedidos</a>
      <a href="../Insumos/insumos.html">Insumos</a>
      <a href="../Pedidos Activos/Activos.html">Pedidos Activos</a>
      <a href="../TiemposEntrega/tiempos_entrega.html">Tiempos Entrega</a>
      <a href="../HorasExtra/horas_extra.html">Horas Extra</a>
    </div>

    <div>
        <img class="esquina" src="../../resources/Logo.png" alt="Logo" width="120px" style="padding: 5px;">
    </div>

    <div>
        <h1>Tiempos Entrega </h1>
    </div>

    <div class="centrar">
        <section class="column">
            <div class="container-select">
                <label for="empleados">ID de Cotizacion:</label>
                <input type="text" name="id_cotizacion" id="id_cotizacion">
                <div></div>
            </div>
        </section>

        <div>
            <table class="tablero" id="horasExtras">
                <thead>
                    <tr>
                        <th>Técnica</th>
                        <th>Descripción</th>
                        <th>Cantidad</th>
                        <th>Producción Aproximada</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <select name="tecnica" id="tecnica">
                                <option value="">Selecciona técnica</option>
                                <option value="">Bordado</option>
                                <option value="">Serigrafía</option>
                                <option value="">Transfer</option>
                                <option value="">Vinyl</option>
                                <option value="">Grabado</option>
                            </select>
                        </td>
                        <td><input type="text" class="description"></td>
                        <td><input type="number" class="horas"></td>
                        <td><input type="number" class="producc">hrs</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="container-select">
            <label for="consumidor">Consumidor:</label>
            <select name="consumidor" id="consumidor">
                <option value="Selecciona consumidor">Selecciona una opción</option>
                <option value="consumidor1">Consumidor 1</option>
                <option value="consumidor2">Consumidor 2</option>
                <option value="consumidor3">Consumidor 3</option>
            </select>
        </div>

        <div class="container-select">
            <label for="contacto">Contacto:</label>
            <input type="text" name="contacto" id="contacto" placeholder="Ingrese contacto">
        </div>
        
        <section class="column">
            <div class="container-select">
                <a href="../../modules/Cotizador/cotizador.html"><button class="boton">Regresar</button></a>
            </div>
            <div>
                <button class="boton" onclick="finalizarPedido()">Finalizar</button>
            </div>
        </section>
    </div>

    <script>
        function openNav() {
            document.getElementById("mySidebar").classList.add("open");
        }

        function closeNav() {
            document.getElementById("mySidebar").classList.remove("open");
        }

        function finalizarPedido() {
            // Obtener datos de cotizador de localStorage
            const cotizadorData = JSON.parse(localStorage.getItem('cotizadorData'));
            const consumidor = document.getElementById('consumidor').value;
            const contacto = document.getElementById('contacto').value;

            const pedidoData = {
                id_cotizacion: document.getElementById('id_cotizacion').value,
                tecnica: cotizadorData.tecnica,
                producto: cotizadorData.producto,
                cantidad: cotizadorData.cantidad,
                fecha_requerida: cotizadorData.fecha_requerida,
                costo: cotizadorData.costo,
                consumidor: consumidor,
                contacto: contacto
            };

            // Guardar datos en localStorage
            let pedidosActivos = JSON.parse(localStorage.getItem('pedidosActivos')) || [];
            pedidosActivos.push(pedidoData);
            localStorage.setItem('pedidosActivos', JSON.stringify(pedidosActivos));

            // Redirigir a pedidos activos
            window.location.href = '../Pedidos Activos/Activos.html';
        }
    </script>
</body>
</html>

